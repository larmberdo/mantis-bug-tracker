<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mantis ECMS Bug è·Ÿè¸ªè®°å½•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        h2 {
            color: #34495e;
            margin-top: 30px;
            padding: 10px 0;
            border-left: 4px solid #3498db;
            padding-left: 15px;
        }
        h3 {
            color: #2980b9;
            margin-top: 25px;
        }
        .status {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            margin: 5px 0;
        }
        .completed { background-color: #d4edda; color: #155724; }
        .fixed-pending-verification { background-color: #fff3cd; color: #856404; }
        .pending { background-color: #f8d7da; color: #721c24; }
        .transfer { background-color: #ffcc99; color: #8B4513; }
        .not-bug { background-color: #e6ccff; color: #6a0d83; }
        .not-reproduced { background-color: #cce5ff; color: #0066cc; }
        .bug-item {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid #3498db;
        }
        .bug-id {
            font-size: 18px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        .meta-info {
            margin: 10px 0;
            font-size: 14px;
        }
        .description {
            background: white;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .steps {
            background: #e8f4f8;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .screenshot-path {
            background: #fff3cd;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: monospace;
        }
        .date-section {
            border-top: 2px solid #3498db;
            margin-top: 40px;
            padding-top: 20px;
        }
        .legend {
            background: #e8f4f8;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .legend h2 {
            margin-top: 0;
            border-left: none;
            padding-left: 0;
        }
        .legend ul {
            list-style: none;
            padding: 0;
        }
        .legend li {
            margin: 8px 0;
            padding: 8px;
            border-radius: 5px;
        }
        .last-updated {
            text-align: center;
            color: #666;
            font-style: italic;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        .filter-section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 1px solid #e9ecef;
        }
        .filter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        .filter-group {
            display: flex;
            flex-direction: column;
        }
        .filter-group label {
            font-weight: bold;
            margin-bottom: 8px;
            color: #333;
        }
        .filter-group select, .filter-group input {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        .filter-buttons {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
        }
        .btn-primary {
            background-color: #3498db;
            color: white;
        }
        .btn-secondary {
            background-color: #6c757d;
            color: white;
        }
        .btn:hover {
            opacity: 0.9;
        }
        .stats-section {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        .stat-item {
            text-align: center;
            padding: 15px 10px;
            background: white;
            border-radius: 6px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: #2c3e50;
        }
        .stat-label {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ› Mantis ECMS Bug è·Ÿè¸ªè®°å½•</h1>
        
        <div class="legend">
            <h2>ğŸ“Š çŠ¶æ€è¯´æ˜</h2>
            <ul>
                <li class="status completed">ğŸŸ¢ å·²å®Œæˆ: é—®é¢˜å·²ä¿®å¤å¹¶éªŒè¯</li>
                <li class="status fixed-pending-verification">ğŸŸ¡ å·²ä¿®å¤ï¼Œå¾…éªŒè¯: é—®é¢˜å·²ä¿®å¤ï¼Œç­‰å¾…éªŒè¯ç¡®è®¤</li>
                <li class="status pending">ğŸ”´ æœªå®Œæˆ: é—®é¢˜å¾…å¤„ç†</li>
                <li class="status transfer">ğŸŸ  éœ€è¦è½¬ç§»: éœ€è¦å…¶ä»–å›¢é˜Ÿ/äººå‘˜å¤„ç†</li>
                <li class="status not-bug">ğŸŸ£ éBug: ä¸æ˜¯å®é™…é—®é¢˜ï¼Œå¾…é€€å›</li>
                <li class="status not-reproduced">ğŸ”µ æœªå¤ç°: é—®é¢˜æ— æ³•å¤ç°ï¼Œéœ€è¦æ›´å¤šä¿¡æ¯</li>
            </ul>
        </div>

        <!-- ç»Ÿè®¡ä¿¡æ¯ -->
        <div class="stats-section">
            <h3 style="margin-top: 0; color: #2c3e50;">ğŸ“Š ç»Ÿè®¡æ¦‚è§ˆ</h3>
            <div class="stats-grid" id="statsGrid">
                <!-- ç»Ÿè®¡é¡¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
            <div style="text-align: center; margin-top: 15px;">
                <span style="font-size: 16px; font-weight: bold; color: #2c3e50;" id="totalCount">
                    æ˜¾ç¤º 0 / 0 ä¸ªBug
                </span>
            </div>
        </div>

        <!-- ç­›é€‰åŠŸèƒ½ -->
        <div class="filter-section">
            <h3 style="margin-top: 0; color: #2c3e50;">ğŸ” ç­›é€‰åŠŸèƒ½</h3>
            <div class="filter-grid">
                <div class="filter-group">
                    <label>çŠ¶æ€ç­›é€‰</label>
                    <select id="statusFilter" multiple size="6">
                        <option value="completed">ğŸŸ¢ å·²å®Œæˆ</option>
                        <option value="fixed-pending-verification">ğŸŸ¡ å·²ä¿®å¤ï¼Œå¾…éªŒè¯</option>
                        <option value="pending">ğŸ”´ æœªå®Œæˆ</option>
                        <option value="transfer">ğŸŸ  éœ€è¦è½¬ç§»</option>
                        <option value="not-bug">ğŸŸ£ éBug</option>
                        <option value="not-reproduced">ğŸ”µ æœªå¤ç°</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>é€‰æ‹©æ—¥æœŸ</label>
                    <select id="dateFilter">
                        <option value="">æ‰€æœ‰æ—¥æœŸ</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>å¤„ç†äººå‘˜</label>
                    <select id="assigneeFilter">
                        <option value="">æ‰€æœ‰äººå‘˜</option>
                    </select>
                </div>
            </div>
            <div class="filter-buttons">
                <button class="btn btn-primary" onclick="applyFilters()">åº”ç”¨ç­›é€‰</button>
                <button class="btn btn-secondary" onclick="resetFilters()">é‡ç½®ç­›é€‰</button>
            </div>
        </div>

        <div class="date-section">
            <h2>ğŸ“… 6æœˆ11æ—¥</h2>

            <div class="bug-item">
                <div class="bug-id">ğŸ†” 0000189: Recount function without RO, and auto authorized successful</div>
                <div class="meta-info">
                    <span class="status completed">ğŸŸ¢ çŠ¶æ€: å·²å®Œæˆ</span><br>
                    <strong>ğŸ‘¤ å¤„ç†äººå‘˜:</strong> å‰ç«¯å¤„ç†
                </div>
                <div class="description">
                    <strong>ğŸ“ é—®é¢˜æè¿°:</strong><br>
                    Device Management -> Click icon (right upper) -> Recount<br>
                    login user has Device Management with recount access only, without RO access.<br>
                    But the authorized successful automatically, and without insert RO U
                </div>
                <div class="steps">
                    <strong>ğŸ”„ å¤ç°æ­¥éª¤:</strong><br>
                    Device Management -> Click icon (right upper) -> Recount
                </div>
            </div>

            <div class="bug-item">
                <div class="bug-id">ğŸ†” 0000188: Wording issue for "severs", it should be servers</div>
                <div class="meta-info">
                    <span class="status completed">ğŸŸ¢ çŠ¶æ€: å·²å®Œæˆ</span><br>
                    <strong>ğŸ‘¤ å¤„ç†äººå‘˜:</strong> å‰ç«¯å¤„ç†
                </div>
                <div class="description">
                    <strong>ğŸ“ é—®é¢˜æè¿°:</strong><br>
                    Initialisation popup window:<br>
                    â€¢ é”™è¯¯: Please confirm to execute data initialisation for all devices and severs<br>
                    â€¢ æ­£ç¡®: Please confirm to execute data initialisation for all devices and servers
                </div>
                <div class="steps">
                    <strong>ğŸ”„ å¤ç°æ­¥éª¤:</strong><br>
                    Device Management -> Click icon (right upper) -> Data Initialisation
                </div>
            </div>

            <div class="bug-item">
                <div class="bug-id">ğŸ†” 0000207: ECMS: Server error when Consolidation</div>
                <div class="meta-info">
                    <span class="status completed">ğŸŸ¢ çŠ¶æ€: å·²å®Œæˆ</span><br>
                    <strong>ğŸ‘¤ å¤„ç†äººå‘˜:</strong> åç«¯å¤„ç†
                </div>
                <div class="description">
                    <strong>ğŸ“ é—®é¢˜æè¿°:</strong><br>
                    Server error when select all subsectors to consolidate.
                </div>
                <div class="steps">
                    <strong>ğŸ”„ å¤ç°æ­¥éª¤:</strong><br>
                    1. Election Result Management > Votes Consolidation > Select All Subsectors<br>
                    2. Consolidate<br>
                    3. "Server error" appear
                </div>
                <div class="screenshot-path">
                    <strong>ğŸ“¸ æˆªå›¾è·¯å¾„:</strong> "192.168.100.158\TestFolder\Wesoft Bug to Mantis\Peter\0000207"
                </div>
            </div>

            <div class="bug-item">
                <div class="bug-id">ğŸ†” 0000208: ECMS: Error message when export User Audit Trial Report</div>
                <div class="meta-info">
                    <span class="status not-bug">ğŸŸ çŠ¶æ€: æœªå¤ç°ï¼ˆæ€€ç–‘ç½‘ç»œé—®é¢˜ï¼‰</span><br>
                    <strong>ğŸ‘¤ å¤„ç†äººå‘˜:</strong> åç«¯å¤„ç†
                </div>
                <div class="description">
                    <strong>ğŸ“ é—®é¢˜æè¿°:</strong><br>
                    User Audit Trial Report can't be exported and error message appear
                </div>
                <div class="steps">
                    <strong>ğŸ”„ å¤ç°æ­¥éª¤:</strong><br>
                    1. System Management > Audit report management > User Audit Trial Report<br>
                    2. Export<br>
                    3. Error message appear
                </div>
                <div class="screenshot-path">
                    <strong>ğŸ“¸ æˆªå›¾è·¯å¾„:</strong> "192.168.100.158\TestFolder\Wesoft Bug to Mantis\Peter\0000208"
                </div>
            </div>

            <div class="bug-item">
                <div class="bug-id">ğŸ†” 0000209: ECMS: Incorrect report title and No "Device no." data display</div>
                <div class="meta-info">
                    <span class="status transfer">ğŸŸ¡ çŠ¶æ€: éœ€è¦è½¬è®¾å¤‡ç«¯(æ ‡é¢˜å·²æ”¹,æ•°æ®è®¾å¤‡ç«¯æœªæŠ¥)</span><br>
                    <strong>ğŸ‘¤ å¤„ç†äººå‘˜:</strong> åç«¯å¤„ç†
                </div>
                <div class="description">
                    <strong>ğŸ“ é—®é¢˜æè¿°:</strong><br>
                    â€¢ Batch message report: No "Device no." data display and report title is correct<br>
                    â€¢ Batch scanning summary report: No "Device no." data display and report title is correct
                </div>
                <div class="steps">
                    <strong>ğŸ”„ å¤ç°æ­¥éª¤:</strong><br>
                    1. System Management > Audit report management > Batch message report<br>
                    2. System Management > Audit report management > Batch scanning summary report
                </div>
                <div class="screenshot-path">
                    <strong>ğŸ“¸ æˆªå›¾è·¯å¾„:</strong> "192.168.100.158\TestFolder\Wesoft Bug to Mantis\Peter\0000209"
                </div>
            </div>

            <div class="bug-item">
                <div class="bug-id">ğŸ†” 0000210: ECMS: Some data still display as English after language change</div>
                <div class="meta-info">
                    <span class="status not-bug">ğŸŸ  çŠ¶æ€: ä¸æ˜¯bugï¼Œå¾…é€€å›(è®¾å¤‡ç«¯å·²æ²Ÿé€šåªæ”¯æŒè‹±æ–‡)</span><br>
                    <strong>ğŸ‘¤ å¤„ç†äººå‘˜:</strong> åç«¯å¤„ç†
                </div>
                <div class="description">
                    <strong>ğŸ“ é—®é¢˜æè¿°:</strong><br>
                    The data of "Module" and Action name" still display as English in User Audit Trial Report after change application language to Traditional Chinese
                </div>
                <div class="steps">
                    <strong>ğŸ”„ å¤ç°æ­¥éª¤:</strong><br>
                    1. Change application language to Traditional Chinese<br>
                    2. System Management > Audit report management > User Audit Trial Report<br>
                    3. Some data still display in English
                </div>
                <div class="screenshot-path">
                    <strong>ğŸ“¸ æˆªå›¾è·¯å¾„:</strong> "192.168.100.158\TestFolder\Wesoft Bug to Mantis\Peter\0000210"
                </div>
            </div>
        </div>

        <div class="date-section">
            <h2>ğŸ“… 6æœˆ10æ—¥</h2>

            <div class="bug-item">
                <div class="bug-id">ğŸ†” 0000205: ECMS: Batch data can't be shown after switch</div>
                <div class="meta-info">
                    <span class="status completed">ğŸŸ¢ çŠ¶æ€: å·²å®Œæˆ</span><br>
                    <strong>ğŸ‘¤ å¤„ç†äººå‘˜:</strong> å‰ç«¯å¤„ç†
                </div>
                <div class="description">
                    <strong>ğŸ“ é—®é¢˜æè¿°:</strong><br>
                    Batch data can't be shown after switch between "All" and "Device number" in "Device no." under "Enquire Batch in VBIS"
                </div>
                <div class="screenshot-path">
                    <strong>ğŸ“¸ æˆªå›¾è·¯å¾„:</strong> "192.168.100.158\TestFolder\Wesoft Bug to Mantis\Peter\0000205"
                </div>
            </div>

            <div class="bug-item">
                <div class="bug-id">ğŸ†” 0000203: ECMS - Close Counting - wording issue in Confirm message</div>
                <div class="meta-info">
                    <span class="status completed">ğŸŸ¢ çŠ¶æ€: å·²å®Œæˆ</span><br>
                    <strong>ğŸ‘¤ å¤„ç†äººå‘˜:</strong> å‰ç«¯å¤„ç†
                </div>
                <div class="description">
                    <strong>ğŸ“ é—®é¢˜æè¿°:</strong><br>
                    â€¢ é”™è¯¯: ... These devices may not be able to start counting....<br>
                    â€¢ æ­£ç¡®: ... These devices may not be able to Close counting....
                </div>
            </div>

            <div class="bug-item">
                <div class="bug-id">ğŸ†” 0000186: ECMS: No data import from HSS0.5 & VBIS when use offline data recovery</div>
                <div class="meta-info">
                    <span class="status transfer">ğŸŸ¡ çŠ¶æ€: éœ€è¦è½¬ç¦»çº¿æ•°æ®å¯¼å…¥åº”ç”¨å¤„ç†</span>
                </div>
                <div class="description">
                    <strong>ğŸ“ é—®é¢˜æè¿°:</strong><br>
                    During import data, it will show 100% imported but there is no data display on related subsector in progress monitoring
                </div>
                <div class="screenshot-path">
                    <strong>ğŸ“¸ æˆªå›¾è·¯å¾„:</strong> "192.168.100.158\TestFolder\Wesoft Bug to Mantis\Peter\0000186"
                </div>
            </div>

            <!-- ç»§ç»­æ·»åŠ å…¶ä»–bugé¡¹ç›®... -->
        </div>

        <div class="last-updated">
            <p>ğŸ“… æœ€åæ›´æ–°æ—¶é—´: <span id="lastUpdated"></span></p>
            <p>ğŸ”— å¦‚æœ‰é—®é¢˜è¯·è”ç³»å¼€å‘å›¢é˜Ÿ</p>
        </div>
    </div>

    <script>
        // Bugæ•°æ®å’ŒçŠ¶æ€é…ç½®
        const statusConfig = {
            'completed': { label: 'å·²å®Œæˆ', emoji: 'ğŸŸ¢', description: 'é—®é¢˜å·²ä¿®å¤å¹¶éªŒè¯' },
            'fixed-pending-verification': { label: 'å·²ä¿®å¤ï¼Œå¾…éªŒè¯', emoji: 'ğŸŸ¡', description: 'é—®é¢˜å·²ä¿®å¤ï¼Œç­‰å¾…éªŒè¯ç¡®è®¤' },
            'pending': { label: 'æœªå®Œæˆ', emoji: 'ğŸ”´', description: 'é—®é¢˜å¾…å¤„ç†' },
            'transfer': { label: 'éœ€è¦è½¬ç§»', emoji: 'ğŸŸ ', description: 'éœ€è¦å…¶ä»–å›¢é˜Ÿ/äººå‘˜å¤„ç†' },
            'not-bug': { label: 'éBug', emoji: 'ğŸŸ£', description: 'ä¸æ˜¯å®é™…é—®é¢˜ï¼Œå¾…é€€å›' },
            'not-reproduced': { label: 'æœªå¤ç°', emoji: 'ğŸ”µ', description: 'é—®é¢˜æ— æ³•å¤ç°ï¼Œéœ€è¦æ›´å¤šä¿¡æ¯' }
        };

        let allBugs = [];
        let filteredBugs = [];

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // æ˜¾ç¤ºæœ€åæ›´æ–°æ—¶é—´
            document.getElementById('lastUpdated').textContent = new Date().toLocaleString('zh-CN');
            
            // åˆå§‹åŒ–Bugæ•°æ®
            initializeBugData();
            
            // åˆå§‹åŒ–å¤„ç†äººå‘˜ä¸‹æ‹‰åˆ—è¡¨
            initializeAssigneeFilter();
            
            // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
            updateStats();
            
            // æ·»åŠ äº¤äº’åŠŸèƒ½
            addInteractiveBehavior();
        });

        // ä»DOMä¸­æå–Bugæ•°æ®
        function initializeBugData() {
            const bugItems = document.querySelectorAll('.bug-item');
            allBugs = [];
            
            bugItems.forEach(item => {
                const bug = extractBugFromDom(item);
                if (bug) {
                    allBugs.push(bug);
                }
            });
            
            filteredBugs = [...allBugs];
            
            // åˆå§‹åŒ–æ—¥æœŸç­›é€‰å™¨
            initializeDateFilter();
        }

        // åˆå§‹åŒ–æ—¥æœŸç­›é€‰å™¨
        function initializeDateFilter() {
            const dateFilter = document.getElementById('dateFilter');
            const uniqueDates = [...new Set(allBugs.map(bug => bug.date).filter(Boolean))];
            
            // æŒ‰æ—¥æœŸæ’åºï¼ˆæœ€æ–°çš„åœ¨å‰ï¼‰
            uniqueDates.sort((a, b) => new Date(b) - new Date(a));
            
            uniqueDates.forEach(date => {
                const option = document.createElement('option');
                option.value = date;
                option.textContent = formatDateForDisplay(date);
                dateFilter.appendChild(option);
            });
        }

        // æ ¼å¼åŒ–æ—¥æœŸæ˜¾ç¤º
        function formatDateForDisplay(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('zh-CN', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
        }

        // ä»DOMå…ƒç´ ä¸­æå–Bugä¿¡æ¯
        function extractBugFromDom(element) {
            const idElement = element.querySelector('.bug-id');
            const statusElement = element.querySelector('.status');
            const assigneeElement = element.querySelector('strong');
            
            if (!idElement || !statusElement) return null;
            
            const idText = idElement.textContent;
            const idMatch = idText.match(/ğŸ†”\s*(\d+):\s*(.+)/);
            
            if (!idMatch) return null;
            
            // ä»çŠ¶æ€å…ƒç´ çš„classä¸­æå–çŠ¶æ€
            let status = 'pending';
            statusElement.classList.forEach(cls => {
                if (cls.startsWith('status') && cls !== 'status') {
                    status = cls.replace('status ', '').trim();
                }
            });
            
            // æå–å¤„ç†äººå‘˜
            let assignee = '';
            if (assigneeElement && assigneeElement.textContent.includes('å¤„ç†äººå‘˜:')) {
                const assigneeText = assigneeElement.parentNode.textContent;
                const assigneeMatch = assigneeText.match(/å¤„ç†äººå‘˜:\s*([^\n]+)/);
                assignee = assigneeMatch ? assigneeMatch[1].trim() : '';
            }
            
            // ä»çˆ¶çº§æ—¥æœŸsectionä¸­æå–æ—¥æœŸ
            let date = '';
            const dateSection = element.closest('.date-section');
            if (dateSection) {
                const dateHeader = dateSection.querySelector('h2');
                if (dateHeader) {
                    const dateText = dateHeader.textContent;
                    const dateMatch = dateText.match(/ğŸ“…\s*(\d+æœˆ\d+æ—¥)/);
                    if (dateMatch) {
                        // è½¬æ¢ä¸ºæ ‡å‡†æ—¥æœŸæ ¼å¼
                        const monthDay = dateMatch[1];
                        const monthMatch = monthDay.match(/(\d+)æœˆ(\d+)æ—¥/);
                        if (monthMatch) {
                            const month = monthMatch[1].padStart(2, '0');
                            const day = monthMatch[2].padStart(2, '0');
                            date = `2024-${month}-${day}`;
                        }
                    }
                }
            }
            
            return {
                id: idMatch[1],
                title: idMatch[2],
                status: status,
                assignee: assignee,
                date: date,
                element: element
            };
        }

        // åˆå§‹åŒ–å¤„ç†äººå‘˜ç­›é€‰å™¨
        function initializeAssigneeFilter() {
            const assigneeFilter = document.getElementById('assigneeFilter');
            const uniqueAssignees = [...new Set(allBugs.map(bug => bug.assignee).filter(Boolean))];
            
            uniqueAssignees.forEach(assignee => {
                const option = document.createElement('option');
                option.value = assignee;
                option.textContent = assignee;
                assigneeFilter.appendChild(option);
            });
        }

        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
        function updateStats() {
            const statsGrid = document.getElementById('statsGrid');
            const totalCount = document.getElementById('totalCount');
            
            // æ¸…ç©ºç»Ÿè®¡ç½‘æ ¼
            statsGrid.innerHTML = '';
            
            // è®¡ç®—å„çŠ¶æ€çš„æ•°é‡
            const stats = {};
            Object.keys(statusConfig).forEach(status => {
                stats[status] = filteredBugs.filter(bug => bug.status === status).length;
            });
            
            // ç”Ÿæˆç»Ÿè®¡é¡¹
            Object.entries(stats).forEach(([status, count]) => {
                const statItem = document.createElement('div');
                statItem.className = 'stat-item';
                statItem.innerHTML = `
                    <div class="stat-number">${count}</div>
                    <div class="stat-label">${statusConfig[status].emoji} ${statusConfig[status].label}</div>
                `;
                statsGrid.appendChild(statItem);
            });
            
            // æ›´æ–°æ€»è®¡æ•°
            totalCount.textContent = `æ˜¾ç¤º ${filteredBugs.length} / ${allBugs.length} ä¸ªBug`;
        }

        // åº”ç”¨ç­›é€‰
        function applyFilters() {
            const statusFilter = document.getElementById('statusFilter');
            const dateFilter = document.getElementById('dateFilter').value;
            const assigneeFilter = document.getElementById('assigneeFilter').value;
            
            // è·å–é€‰ä¸­çš„çŠ¶æ€
            const selectedStatuses = Array.from(statusFilter.selectedOptions).map(option => option.value);
            
            // ç­›é€‰Bug
            filteredBugs = allBugs.filter(bug => {
                // çŠ¶æ€ç­›é€‰
                if (selectedStatuses.length > 0 && !selectedStatuses.includes(bug.status)) {
                    return false;
                }
                
                // æ—¥æœŸç­›é€‰ - ç²¾ç¡®åŒ¹é…é€‰ä¸­çš„æ—¥æœŸ
                if (dateFilter && bug.date !== dateFilter) {
                    return false;
                }
                
                // å¤„ç†äººå‘˜ç­›é€‰
                if (assigneeFilter && bug.assignee !== assigneeFilter) {
                    return false;
                }
                
                return true;
            });
            
            // æ›´æ–°æ˜¾ç¤º
            updateBugDisplay();
            updateStats();
        }

        // é‡ç½®ç­›é€‰
        function resetFilters() {
            document.getElementById('statusFilter').selectedIndex = -1;
            document.getElementById('dateFilter').value = '';
            document.getElementById('assigneeFilter').value = '';
            
            filteredBugs = [...allBugs];
            updateBugDisplay();
            updateStats();
        }

        // æ›´æ–°Bugæ˜¾ç¤º
        function updateBugDisplay() {
            // éšè—æ‰€æœ‰Bugé¡¹
            allBugs.forEach(bug => {
                bug.element.style.display = 'none';
            });
            
            // æ˜¾ç¤ºç­›é€‰åçš„Bugé¡¹
            filteredBugs.forEach(bug => {
                bug.element.style.display = 'block';
            });
            
            // å¤„ç†æ—¥æœŸåˆ†ç»„çš„æ˜¾ç¤º
            const dateSections = document.querySelectorAll('.date-section');
            dateSections.forEach(section => {
                const visibleBugs = section.querySelectorAll('.bug-item:not([style*="display: none"])');
                if (visibleBugs.length === 0) {
                    section.style.display = 'none';
                } else {
                    section.style.display = 'block';
                    // æ›´æ–°æ—¥æœŸæ ‡é¢˜ä¸­çš„Bugæ•°é‡
                    const header = section.querySelector('h2');
                    if (header) {
                        const originalText = header.textContent.replace(/\s*\(\d+\s*ä¸ªBug\)/, '');
                        header.textContent = `${originalText} (${visibleBugs.length} ä¸ªBug)`;
                    }
                }
            });
        }

        // æ·»åŠ äº¤äº’è¡Œä¸º
        function addInteractiveBehavior() {
            document.querySelectorAll('.bug-item').forEach(item => {
                item.addEventListener('click', function() {
                    this.style.transform = this.style.transform === 'scale(1.02)' ? 'scale(1)' : 'scale(1.02)';
                    this.style.transition = 'transform 0.2s ease';
                });
            });
        }
    </script>
</body>
</html> 